{% extends "layout.html" %}
{% block content %}

<h1>Orders</h1>
<hr><br>

<div class="row mt-3 h-100 justify-content-center align-items-center">

    
    <div class="col-md-3 col-sm-3 my-auto border">
        <!-- name -->
        <p><b>Clint Name</b></p>
    </div>
    <div class="col-md-4 col-sm-4 my-auto text-center border">
        <!-- dish name -->
        <p ><b>Dish Name</b></p>
    </div>
    <!-- <div class="col-md-2 my-auto ">
         dish icon
        <b></b>
    </div> -->
    <div class="col-md-1 col-sm-1 my-auto text-center border">
        <!-- quantity -->
        <p><b>Quantity</b></p>
    </div>
    <div class="col-md-2 col-sm-2 my-auto text-center border">
        <!-- quantity -->
        <p><b>Location</b></p>
    </div>
    
    <div class="col-md-2 col-sm-2 my-auto text-center border">
        <p><b>Action</b></p>
    </div>    

</div>


{% for object in objectList|reverse %}

    {% for k,v in object.items() %}
       
    <div class="row mt-3 h-100 justify-content-center align-items-center">

        <div class="col-md-1">
            <!-- image -->
            <img class="rounded-circle article-img" src="{{v['clintPhotoUri']}}" alt="image">
        </div>
        <div class="col-md-2 my-auto">
            <!-- name -->
            <p>{{v['clintName']}}</p>
        </div>
        <div class="col-md-2 my-auto">
            <!-- dish name -->
            <p>{{v['dishName']}}</p>
        </div>
        <div class="col-md-2 my-auto">
            <!-- dish icon -->
            <img class="rounded " src="../static/images/food_icon/{{v['dishName'].replace(' ', '_').lower()}}.png" alt="image" width="30px" height="30px">
        </div>
        <div class="col-md-1 my-auto text-center">
            <!-- quantity -->
            <p>{{v['dishQuantity']}}</p>
        </div>
        <div class="col-md-2 my-auto text-center">
            <!-- quantity -->
            <p>{{v['clintLocation']}}</p>
        </div>
        
        <div class="col-md-2 my-auto text-center">
            {% if v['accepted'] == true %}

                {% if v['completed'] %}
                    <button class="btn btn-success smgd" disabled >Completed</button>
                {% else %}
                    <button class="btn btn-success smgd" disabled >Accepted</button>
                {% endif %}
    
            {% else %}

                {% if v['cancelled'] %}
                    <button class="btn btn-danger smgd" disabled >Cancelled</button>
                {% else %}
                    <button class="btn btn-info btn-outline-info smgd" value="{{v['clintUID'] + k}}" >Accept</button>
                {% endif %}
                
            {% endif %}
        </div>    
    
    </div>


    {% endfor%}

{% endfor %}


<script type="text/javascript">
$(document).ready(function() {

$( "button" ).click(function() {
    var data = $(this).val();
    var self = $(this);
    console.log(data)
    $.ajax({
            url: '/accept_process',
            datatype : 'application/json;charset=UTF-8',
			data: {"data": data},
			type: 'POST',
			success: function(response){
                console.log(response);
                self.removeClass("btn-info btn-outline-info").addClass("btn-success");
                self.attr('disabled' , 'disabled').text("Accepted");
			},
			error: function(error){
				console.log(error);
			}
		});
});

});
</script>





{% endblock %}